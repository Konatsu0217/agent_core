# Agent Core é¡¹ç›®ç»“æ„

## ğŸ“Š å®Œæ•´ç›®å½•æ ‘

```
agent_core/
â”œâ”€â”€ src/                                    # âœ¨ æ–°çš„DDDç»“æ„
â”‚   â”œâ”€â”€ agent/                             # Agentæ ¸å¿ƒé¢†åŸŸ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ abs_agent.py                  # AgentæŠ½è±¡åŸºç±»
â”‚   â”‚   â”œâ”€â”€ fast_agent.py                 # å¿«é€ŸAgentå®ç°
â”‚   â”‚   â”œâ”€â”€ one_shot_agent.py             # å•æ¬¡Agentå®ç°
â”‚   â”‚   â”œâ”€â”€ react_agent.py                # ReAct Agentå®ç°
â”‚   â”‚   â”œâ”€â”€ plan_and_solve_agent.py       # Plan-and-Solve Agentå®ç°
â”‚   â”‚   â””â”€â”€ basic_work_flow.py             # åŸºç¡€å·¥ä½œæµ
â”‚   â”‚
â”‚   â”œâ”€â”€ infrastructure/                    # åŸºç¡€è®¾æ–½å±‚
â”‚   â”‚   â”œâ”€â”€ clients/                      # å¤–éƒ¨æœåŠ¡å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ llm_client.py             # LLMå®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ mcp_client.py             # MCP Hubå®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ mem0ai_client.py          # è®°å¿†ç®¡ç†å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ pe_client.py              # PE Serverå®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ session_manager.py        # ä¼šè¯ç®¡ç†å™¨
â”‚   â”‚   â”‚   â””â”€â”€ bilibili_live_client/     # Bç«™ç›´æ’­å®¢æˆ·ç«¯
â”‚   â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚       â”œâ”€â”€ msgEnum.py
â”‚   â”‚   â”‚       â”œâ”€â”€ proto.py
â”‚   â”‚   â”‚       â””â”€â”€ ws.py
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ handlers/                     # ç‰¹æ®Šå¤„ç†å™¨
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ tts_handler.py            # TTSå¤„ç†å™¨
â”‚   â”‚       â””â”€â”€ vrma_handler.py           # VRMAå¤„ç†å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ domain/                            # é¢†åŸŸå±‚
â”‚   â”‚   â””â”€â”€ models/                       # é¢†åŸŸæ¨¡å‹
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ agent_data_models.py      # Agentæ•°æ®æ¨¡å‹
â”‚   â”‚       â””â”€â”€ danmaku_models.py         # å¼¹å¹•æ•°æ®æ¨¡å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ interfaces/                       # æ¥å£å±‚
â”‚   â”‚   â”œâ”€â”€ api/                          # REST APIè·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â””â”€â”€ routes.py                 # APIè·¯ç”±å®šä¹‰
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ websocket/                    # WebSocketå¤„ç†
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â””â”€â”€ handler.py                # WebSocketå¤„ç†å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/                           # å…±äº«æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ config/                       # é…ç½®ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ config_manager.py         # é…ç½®ç®¡ç†å™¨
â”‚   â”‚   â”‚   â””â”€â”€ config_schemas.py         # é…ç½®æ¨¡å¼å®šä¹‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ logging/                      # æ—¥å¿—ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â””â”€â”€ logger.py                 # æ—¥å¿—é…ç½®
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ utils/                        # å·¥å…·å‡½æ•°
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â””â”€â”€ connet_manager.py         # è¿æ¥ç®¡ç†å™¨
â”‚   â”‚
â”‚   â””â”€â”€ README.md                         # Srcç»“æ„è¯´æ˜
â”‚
â”œâ”€â”€ config/                                # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ core.json
â”‚   â”œâ”€â”€ mcp_servers.json
â”‚   â”œâ”€â”€ mem0.json
â”‚   â”œâ”€â”€ motion.json
â”‚   â”œâ”€â”€ pe.json
â”‚   â””â”€â”€ tts.json
â”‚
â”œâ”€â”€ tools/                                 # å·¥å…·ä¸å­æ¨¡å—ï¼ˆå»ºè®®æ‹†åˆ†ï¼‰
â”‚   â”œâ”€â”€ bvh_converter/                    # BVHè½¬VRMAå‰ç«¯å·¥å…·
â”‚   â”œâ”€â”€ danmaku_proxy_service/            # å¼¹å¹•ä»£ç†æœåŠ¡
â”‚   â”œâ”€â”€ mcp_hub/                          # MCP Hubç›¸å…³
â”‚   â”œâ”€â”€ motion_drive/                     # åŠ¨ä½œç”Ÿæˆæµç¨‹
â”‚   â”œâ”€â”€ pe_server/                        # PE Serverç»„ä»¶
â”‚   â””â”€â”€ tts/                              # TTSå¼•æ“ä¸æœåŠ¡
â”‚
â”œâ”€â”€ webUI/                                 # Reactå‰ç«¯ï¼ˆå»ºè®®æ‹†åˆ†ï¼‰
â”‚   â”œâ”€â”€ electron/
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ src/
â”‚
â”œâ”€â”€ test/                                  # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ test_tts/
â”‚   â”œâ”€â”€ test_basic_agent.py
â”‚   â”œâ”€â”€ test_llm_client.py
â”‚   â””â”€â”€ test_multi-tool.py
â”‚
â”œâ”€â”€ doc/                                   # æ–‡æ¡£
â”‚   â”œâ”€â”€ agent_core_guide.md
â”‚   â”œâ”€â”€ agent_paradigms_guide.md
â”‚   â”œâ”€â”€ model_speed_test.md
â”‚   â”œâ”€â”€ moe_agent_architecture.md
â”‚   â””â”€â”€ note_for_agent_repo.md
â”‚
â”œâ”€â”€ main.py                                # å…¥å£æ–‡ä»¶
â”œâ”€â”€ run_all.py                             # å¯åŠ¨æ‰€æœ‰æœåŠ¡
â”œâ”€â”€ global_statics.py                      # å…¨å±€é™æ€å˜é‡
â”œâ”€â”€ core_config.json                       # æ ¸å¿ƒé…ç½®
â”œâ”€â”€ requirements.txt                       # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ README.md                              # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ .env.example                           # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .gitmodules
â””â”€â”€ LICENSE
```

## ğŸ¯ æ¶æ„åˆ†å±‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Interfaces (æ¥å£å±‚)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   REST API   â”‚      â”‚  WebSocket   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Agent (é¢†åŸŸå±‚)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚FastAgent â”‚ â”‚ReActAgentâ”‚ â”‚PlanAgent â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Infrastructure (åŸºç¡€è®¾æ–½å±‚)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Clients â”‚ â”‚ Handlers â”‚ â”‚ Sessions â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Domain (é¢†åŸŸæ¨¡å‹å±‚)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  Models  â”‚ â”‚ Entities â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Shared (å…±äº«å±‚)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Config  â”‚ â”‚  Logging â”‚ â”‚  Utils   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ ä¾èµ–å…³ç³»

```
interfaces â†’ agent â†’ domain
interfaces â†’ infrastructure â†’ domain
shared â†’ (è¢«æ‰€æœ‰å±‚ä½¿ç”¨)
```

## ğŸ”„ è¿ç§»è¿›åº¦

| æ¨¡å— | æ—§è·¯å¾„ | æ–°è·¯å¾„ | çŠ¶æ€ |
|------|--------|--------|------|
| Agent | `core/` | `src/agent/` | âœ… å·²å®Œæˆ |
| Clients | `clients/` | `src/infrastructure/clients/` | âœ… å·²å®Œæˆ |
| Handlers | `handlers/` | `src/infrastructure/handlers/` | âœ… å·²å®Œæˆ |
| Models | `models/` | `src/domain/models/` | âœ… å·²å®Œæˆ |
| Utils | `utils/` | `src/shared/` | âœ… å·²å®Œæˆ |
| API | `main.py` | `src/interfaces/api/` | âœ… å·²å®Œæˆ |
| WebSocket | `main.py` | `src/interfaces/websocket/` | âœ… å·²å®Œæˆ |
| æ—§ç›®å½•åˆ é™¤ | `core/`, `clients/`, `handlers/`, `models/`, `utils/` | - | âœ… å·²å®Œæˆ |

## ğŸ’¡ è®¾è®¡ä¼˜åŠ¿

### 1. æ¸…æ™°çš„èŒè´£åˆ’åˆ†
- **agent/**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œä¸å…³å¿ƒå¤–éƒ¨ä¾èµ–
- **infrastructure/**: å°è£…å¤–éƒ¨æœåŠ¡ï¼Œæ˜“äºæ›¿æ¢
- **domain/**: çº¯ç²¹çš„ä¸šåŠ¡æ¨¡å‹ï¼Œæ— æŠ€æœ¯ä¾èµ–
- **interfaces/**: å¯¹å¤–æ¥å£ï¼Œæ˜“äºæµ‹è¯•å’Œæ‰©å±•
- **shared/**: æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œç»Ÿä¸€ç®¡ç†

### 2. ç¬¦åˆDDDæ€æƒ³
- æŒ‰ä¸šåŠ¡é¢†åŸŸåˆ’åˆ†ï¼Œè€ŒéæŠ€æœ¯åˆ†å±‚
- ä¾èµ–æ–¹å‘æ¸…æ™°ï¼Œé¿å…å¾ªç¯ä¾èµ–
- æ˜“äºç†è§£å’Œç»´æŠ¤

### 3. ä¾¿äºæµ‹è¯•
- æ¯å±‚éƒ½å¯ä»¥ç‹¬ç«‹æµ‹è¯•
- ä½¿ç”¨mockå¯¹è±¡è½»æ¾éš”ç¦»ä¾èµ–
- æé«˜æµ‹è¯•è¦†ç›–ç‡

### 4. æ˜“äºæ‰©å±•
- æ–°å¢Agentåªéœ€åœ¨agent/ç›®å½•æ·»åŠ 
- æ–°å¢å¤–éƒ¨æœåŠ¡åªéœ€åœ¨infrastructure/æ·»åŠ 
- æ–°å¢APIåªéœ€åœ¨interfaces/æ·»åŠ 

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’

### çŸ­æœŸ
- [ ] æ‹†åˆ†`tools/`ä¸‹çš„å­é¡¹ç›®åˆ°ç‹¬ç«‹ä»“åº“
- [ ] ç»Ÿä¸€é…ç½®ç®¡ç†
- [ ] å®Œå–„ç±»å‹æç¤º
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•

### ä¸­æœŸ
- [ ] é‡æ„main.pyï¼Œä½¿ç”¨interfaceså±‚
- [ ] ä¼˜åŒ–WebSocketå¤„ç†é€»è¾‘
- [ ] æ”¹è¿›é”™è¯¯å¤„ç†æœºåˆ¶
- [ ] æ·»åŠ æ€§èƒ½ç›‘æ§

### é•¿æœŸ
- [ ] å®ç°Agentè·¯ç”±å™¨
- [ ] æ”¯æŒå¤šAgentåä½œ
- [ ] æ·»åŠ å¯è§†åŒ–Agentæµç¨‹
- [ ] æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²
